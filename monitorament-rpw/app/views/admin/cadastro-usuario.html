  <!DOCTYPE html>
  <html>
    <head>
      <meta charset="utf-8">
      <title>RPW • Admin</title>
        <script type="text/javascript" src="js/jquery-2.1.1.min.js"></script>
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <link type="text/css" rel="stylesheet" href="css/materialize.css"  media="screen,projection"/>
        <link type="text/css" rel="stylesheet" href="css/admin.css" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    </head>

    <body>
      <!-- MENU -->
      <nav>

        <div class="nav-wrapper">

          <div class="logo-symbol hide-on-med-and-up">
            <img src="img/logo_symbol.png" width="116" height="143">
          </div>

          <ul class="left hide-on-med-and-up2 btn_menu" data-activates="slide-out">
            <li><a href="#!"><i class="material-icons">menu</i></a></li>
          </ul>

          <ul class="right hide-on-small-only btn_sair">
            <li><a href="#" ng-click="sair();"><i class="material-icons right">exit_to_app</i>Sair</a></li>
          </ul>
        </div>

        <ul id="slide-out" class="side-nav fixed rpw-menu">
          <li class="logo"><img src="img/logo_rpw.png" /></li>
          <li><a ng-click="CadastroUsuarioCrtl.inicio();" class="waves-effect"><i class="material-icons">home</i>Início</a></li>
          <li><div class="divider"></div></li>
          <li><a ng-click="CadastroUsuarioCrtl.voltar();" class="waves-effect"><i class="material-icons">business</i>Voltar</a></li>
        </ul>



      </nav>
      <!-- /MENU -->

    <main>
      <div class="section no-p">
        <div class="container2">
          <div class="row no-m">
            <div class="col">
              <h5 class="header blue-text text-darken-2 center-on-small-only title"><i class="material-icons">person_add</i> <span class="light"> Cadastrar Usuário</span></h5>

            </div>
          </div>
          <form novalidate name="mainForm" ng-submit="CadastroUsuarioCrtl.cadastrarUsuario();">
            <div class="row">
              <div class="col s12 m12 ">
                <div class="card-panel">
                  <p>Utilize o formulário para cadastrar usuários.</p>

                  <div id="mensagensValidacaoUsuario" class="row mensagensValidacao" ng-show="mainForm.usuario_login.$dirty && (mainForm.usuario_login.$error.required || mainForm.usuario_login.$error.minlength)">
                    <div class="col">
                      <span ng-class="error" ng-show="mainForm.usuario_login.$dirty && mainForm.usuario_login.$error.required"><i class="tiny material-icons mr10">error</i>Usuário é obrigatório</span>
                      <span ng-class="error" ng-show="mainForm.usuario_login.$dirty &&mainForm.usuario_login.$error.minlength"><i class="tiny material-icons mr10">error</i>Usuário deve ter no minimo 8 caracteres.</span>
                    </div>  
                  </div>

                  <div id="mensagensValidacaoSenha" class="row mensagensValidacao" ng-show="mainForm.usuario_senha.$dirty && (mainForm.usuario_senha.$error.required || mainForm.usuario_senha.$error.minlength)">
                    <div class="col">
                      <span ng-class="error" ng-show="mainForm.usuario_senha.$dirty && mainForm.usuario_senha.$error.required"><i class="tiny material-icons mr10">error</i>Senha é obrigatório</span>
                      <span ng-class="error" ng-show="mainForm.usuario_senha.$dirty &&mainForm.usuario_senha.$error.minlength"><i class="tiny material-icons mr10">error</i>Senha deve ter no minimo 8 caracteres.</span>
                    </div>  
                  </div>

                  <div id="mensagensValidacaoNome" class="row mensagensValidacao" ng-show="mainForm.usuario_nome.$dirty && (mainForm.usuario_nome.$error.required || mainForm.usuario_nome.$error.minlength)">
                    <div class="col">
                      <span ng-class="error" ng-show="mainForm.usuario_nome.$dirty && mainForm.usuario_nome.$error.required"><i class="tiny material-icons mr10">error</i>Usuário é obrigatório</span>
                    </div>  
                  </div>

                  <div id="mensagensValidacaoEmail" class="row mensagensValidacao" ng-show="mainForm.usuario_email.$dirty && (mainForm.usuario_email.$error.required || mainForm.usuario_email.$error.minlength)">
                    <div class="col">
                      <span ng-class="error" ng-show="mainForm.usuario_email.$dirty && mainForm.usuario_email.$error.required"><i class="tiny material-icons mr10">error</i>E-mail é obrigatório</span>
                      <span ng-class="error" ng-show="mainForm.usuario_email.$dirty &&mainForm.usuario_email.$error.email"><i class="tiny material-icons mr10">error</i>O e-mail deve ser válido.</span>
                    </div>  
                  </div>

                  <div id="mensagensValidacaoDDD" class="row mensagensValidacao" ng-show="mainForm.usuario_DDD.$dirty && (mainForm.usuario_DDD.$error.required || mainForm.usuario_DDD.$error.minlength)">
                    <div class="col">
                      <span ng-class="error" ng-show="mainForm.usuario_DDD.$dirty && mainForm.usuario_DDD.$error.required"><i class="tiny material-icons mr10">error</i>DDD é obrigatório</span>
                      <span ng-class="error" ng-show="mainForm.usuario_DDD.$dirty &&mainForm.usuario_DDD.$error.minlength"><i class="tiny material-icons mr10">error</i>DDD deve ter no mímino 3 digitos.</span>
                    </div>  
                  </div>

                  <div id="mensagensValidacaoTelefone" class="row mensagensValidacao" ng-show="mainForm.usuario_telefone.$dirty && (mainForm.usuario_telefone.$error.required || mainForm.usuario_telefone.$error.minlength)">
                    <div class="col">
                      <span ng-class="error" ng-show="mainForm.usuario_telefone.$dirty && mainForm.usuario_telefone.$error.required"><i class="tiny material-icons mr10">error</i>Telefone é obrigatório</span>
                      <span ng-class="error" ng-show="mainForm.usuario_telefone.$dirty &&mainForm.usuario_telefone.$error.minlength"><i class="tiny material-icons mr10">error</i>O telefone deve ter no mímino 8 digitos.</span>
                    </div>  
                  </div>

                  <div class="row">
                    <div class="input-field col s6 pr-5">
                      <input ng-model="CadastroUsuarioCrtl.usuario.usuario" id="usuario_login" name="usuario_login" placeholder="Login do usuário" type="text" required ng-minlength="8">
                      <label for="usuario_login">Usuário</label>
                    </div>
                    <div class="input-field col s6 pl-5" ng-show="CadastroUsuarioCrtl.usuario.senha == ''">
                      <input type="password" ng-model="CadastroUsuarioCrtl.usuario.senha" id="usuario_senha" name="usuario_senha" placeholder="Senha do usuário" type="text" required ng-minlength="8">
                      <label for="usuario_senha">Senha</label>
                    </div>
                  </div>

                  <div class="row">
                    <div class="input-field col s12 m6">
                      <input ng-model="CadastroUsuarioCrtl.usuario.nome" id="usuario_nome" name="usuario_nome" placeholder="Nome do usuário" type="text" required>
                      <label for="usuario_nome">Nome Completo</label>
                    </div>

                    <div class="input-field col s12 m6">
                      <input ng-model="CadastroUsuarioCrtl.usuario.email" id="usuario_email" name="usuario_email" placeholder="exemplo@domínio.com.br" type="text" required>
                      <label for="usuario_email">E-mail</label>
                    </div>

                    <div class="input-field col s6">
                      <input ng-model="CadastroUsuarioCrtl.usuario.telefone.ddd" id="usuario_DDD" name="usuario_DDD" placeholder="Ex: 11" type="text" required ng-minlength="2">
                      <label for="usuario_DDD">DDD</label>
                    </div>

                    <div class="input-field col s6">
                      <input ng-model="CadastroUsuarioCrtl.usuario.telefone.telefone" id="usuario_telefone" name="usuario_telefone" placeholder="00000-0000" type="text" required ng-minlength="8">
                      <label for="usuario_telefone">Telefone</label>
                    </div>

                    <div class="input-field col s12 m6">
                      <input ng-model="CadastroUsuarioCrtl.usuario.endereco.cep" id="usuario_cep" placeholder="Ex: 00000-000" type="text" class="validate">
                      <label for="usuario_cep">CEP</label>
                    </div>

                    <div class="input-field col s12 m6">
                      <input id="tipoUsuario" type="text" style="display:none;" ng-model="CadastroUsuarioCrtl.usuario.tipoUsuario" />
                      <select onchange="alterarComboTipoUsuario();" class="usuario_tipo selectable">
                        <option value="" disabled selected>Selecione</option>
                        <option ng-repeat="item in tiposUsuarioConsulta" value="{{item}}">{{item}}</option>
                      </select>
                      <label>Tipo de usuário</label>
                    </div>

                  <div class="input-field col s6">
                    <input id="estado" type="text" style="display:none;" ng-model="CadastroUsuarioCrtl.usuario.endereco.estado" />
                    <select onchange="alterarComboEstado();" class="usuario_estado selectable">
                      <option value="" disabled selected>Selecione</option>
                      <option value="AC">Acre</option>
                      <option value="AL">Alagoas</option>
                      <option value="AP">Amapá</option>
                      <option value="AM">Amazonas</option>
                      <option value="BA">Bahia</option>
                      <option value="CE">Ceará</option>
                      <option value="DF">Distrito Federal</option>
                      <option value="ES">Espirito Santo</option>
                      <option value="GO">Goiás</option>
                      <option value="MA">Maranhão</option>
                      <option value="MS">Mato Grosso do Sul</option>
                      <option value="MT">Mato Grosso</option>
                      <option value="MG">Minas Gerais</option>
                      <option value="PA">Pará</option>
                      <option value="PB">Paraíba</option>
                      <option value="PR">Paraná</option>
                      <option value="PE">Pernambuco</option>
                      <option value="PI">Piauí</option>
                      <option value="RJ">Rio de Janeiro</option>
                      <option value="RN">Rio Grande do Norte</option>
                      <option value="RS">Rio Grande do Sul</option>
                      <option value="RO">Rondônia</option>
                      <option value="RR">Roraima</option>
                      <option value="SC">Santa Catarina</option>
                      <option value="SP">São Paulo</option>
                      <option value="SE">Sergipe</option>
                      <option value="TO">Tocantins</option>
                    </select>
                    <label>Estado</label>
                  </div>

                  <div class="input-field col s6">
                    <input ng-model="CadastroUsuarioCrtl.usuario.endereco.cidade" id="usuario_cidade" placeholder="Ex: São Paulo" type="text" class="validate">
                    <label for="usuario_cidade">Cidade</label>
                  </div>

                  

                  <div class="input-field col s12 m6">
                    <input ng-model="CadastroUsuarioCrtl.usuario.endereco.bairro" id="usuario_bairro" placeholder="Ex: Jardim Angela" type="text" class="validate">
                    <label for="usuario_bairro">Bairro</label>
                  </div>

                  <div class="input-field col s12 m6">
                    <input ng-model="CadastroUsuarioCrtl.usuario.endereco.logradouro" id="usuario_logradouro" placeholder="Ex: Jardim Angela" type="text" class="validate">
                    <label for="usuario_logradouro">Logradouro</label>
                  </div>

                  <div class="input-field col s6">
                    <input id="cliente" type="text" style="display:none;" ng-model="CadastroUsuarioCrtl.usuario.idCliente" />
                    <select onchange="alterarComboCliente();" class="usuario_cliente selectable">
                      <option value="" disabled selected>Selecione</option>
                      <option ng-repeat="item in clienteConsulta" value="{{item.id}}">{{item.id}} - {{item.nome}}</option>
                    </select>
                    <label>Cliente</label>
                  </div>

                  <div class="input-field col s12">
                    <button type="submit" class="btn-large blue darken-2 waves-effect waves-light col s12" ng-disabled="mainForm.$invalid">Confirmar
                    </button>
                  </div>

                </div>
              </div>
            </div>
          </form>
        </div>
      </div>
    </main>

      <!-- Scripts -->
      <script type="text/javascript" src="js/materialize.js"></script>
      <script type="text/javascript">
        $(document).ready(function(){
            $('.selectable').material_select();
            $('.btn_menu').sideNav({
                menuWidth: 285, 
                closeOnClick: false
              }
            );


            $('.collapsible').collapsible();
            $('.caret').remove();

            angular.element($("#tipoUsuario")).triggerHandler('input')
            var tipoUsuario = $("#tipoUsuario").val();
            if(tipoUsuario != null && tipoUsuario != "") {
              
              $("label").each(function( key, value ) {
                $(this).addClass("active");
              });

              $("div.usuario_tipo > input.select-dropdown").val(tipoUsuario);  
              $("div.usuario_tipo > label").removeClass("active");  
            }

            angular.element($("#estado")).triggerHandler('input')
            var estado = $("#estado").val();
            if(estado != null && estado != "") {
              $("div.usuario_estado > input.select-dropdown").val(estado);
              $("div.usuario_estado > label").removeClass("active");  
            }

            angular.element($("#cliente")).triggerHandler('input')
            var cliente = $("#cliente").val();
            if(cliente != null && cliente != "") {
              $("div.usuario_cliente > input.select-dropdown").val(cliente);  
              $("div.usuario_cliente > label").removeClass("active");
            }

          });

        function alterarComboTipoUsuario() {
          var tipousuarioSelecionado = $("div.usuario_tipo > input.select-dropdown").val();
          $("#tipoUsuario").val(tipousuarioSelecionado);
          angular.element($("#tipoUsuario")).triggerHandler('input')
        }

        function alterarComboEstado() {
          var estadoSelecionado = $("div.usuario_estado > input.select-dropdown").val();
          $("#estado").val(estadoSelecionado);
          angular.element($("#estado")).triggerHandler('input')
        }

        function alterarComboCliente() {
          var clienteSelecionado = $("div.usuario_cliente > input.select-dropdown").val();
          $("#cliente").val(clienteSelecionado.split(" - ")[0]);
          angular.element($("#cliente")).triggerHandler('input')
        }
      </script>
      <!-- /Scripts -->
    </body>
  </html>